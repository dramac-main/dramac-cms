@import "tailwindcss";
@import "../styles/brand-variables.css";

@plugin "tailwindcss-animate";

@custom-variant dark (&:is(.dark *));

/* =============================================
   DESIGN TOKENS
   
   Core design tokens are now generated from the brand system.
   Color scales (50-950) are defined in brand-variables.css.
   
   @see src/config/brand for centralized brand configuration
   @see src/styles/brand-variables.css for generated CSS variables
   ============================================= */

:root {
  /* ---------------------------------------------
     SPACING SCALE
     --------------------------------------------- */
  --spacing-0: 0;
  --spacing-px: 1px;
  --spacing-0-5: 0.125rem;   /* 2px */
  --spacing-1: 0.25rem;      /* 4px */
  --spacing-1-5: 0.375rem;   /* 6px */
  --spacing-2: 0.5rem;       /* 8px */
  --spacing-2-5: 0.625rem;   /* 10px */
  --spacing-3: 0.75rem;      /* 12px */
  --spacing-3-5: 0.875rem;   /* 14px */
  --spacing-4: 1rem;         /* 16px */
  --spacing-5: 1.25rem;      /* 20px */
  --spacing-6: 1.5rem;       /* 24px */
  --spacing-7: 1.75rem;      /* 28px */
  --spacing-8: 2rem;         /* 32px */
  --spacing-9: 2.25rem;      /* 36px */
  --spacing-10: 2.5rem;      /* 40px */
  --spacing-11: 2.75rem;     /* 44px */
  --spacing-12: 3rem;        /* 48px */
  --spacing-14: 3.5rem;      /* 56px */
  --spacing-16: 4rem;        /* 64px */
  --spacing-20: 5rem;        /* 80px */
  --spacing-24: 6rem;        /* 96px */
  --spacing-28: 7rem;        /* 112px */
  --spacing-32: 8rem;        /* 128px */

  /* ---------------------------------------------
     TYPOGRAPHY - Font Family
     --------------------------------------------- */
  --font-sans: var(--font-geist-sans), ui-sans-serif, system-ui, sans-serif;
  --font-mono: var(--font-geist-mono), ui-monospace, monospace;

  /* ---------------------------------------------
     TYPOGRAPHY - Font Size
     --------------------------------------------- */
  --font-size-xs: 0.75rem;     /* 12px */
  --font-size-sm: 0.875rem;    /* 14px */
  --font-size-base: 1rem;      /* 16px */
  --font-size-lg: 1.125rem;    /* 18px */
  --font-size-xl: 1.25rem;     /* 20px */
  --font-size-2xl: 1.5rem;     /* 24px */
  --font-size-3xl: 1.875rem;   /* 30px */
  --font-size-4xl: 2.25rem;    /* 36px */
  --font-size-5xl: 3rem;       /* 48px */
  --font-size-6xl: 3.75rem;    /* 60px */

  /* ---------------------------------------------
     TYPOGRAPHY - Line Height
     --------------------------------------------- */
  --line-height-none: 1;
  --line-height-tight: 1.25;
  --line-height-snug: 1.375;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.625;
  --line-height-loose: 2;

  /* ---------------------------------------------
     TYPOGRAPHY - Font Weight
     --------------------------------------------- */
  --font-weight-thin: 100;
  --font-weight-extralight: 200;
  --font-weight-light: 300;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
  --font-weight-extrabold: 800;
  --font-weight-black: 900;

  /* ---------------------------------------------
     BORDER RADIUS
     --------------------------------------------- */
  --radius-none: 0;
  --radius-sm: 0.125rem;       /* 2px */
  --radius-DEFAULT: 0.25rem;   /* 4px */
  --radius-md: 0.375rem;       /* 6px */
  --radius-lg: 0.5rem;         /* 8px */
  --radius-xl: 0.75rem;        /* 12px */
  --radius-2xl: 1rem;          /* 16px */
  --radius-3xl: 1.5rem;        /* 24px */
  --radius-full: 9999px;

  /* Component-specific radius */
  --radius: 0.625rem;

  /* ---------------------------------------------
     SHADOWS
     --------------------------------------------- */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-DEFAULT: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
  --shadow-2xl: 0 25px 50px -12px rgb(0 0 0 / 0.25);
  --shadow-inner: inset 0 2px 4px 0 rgb(0 0 0 / 0.05);
  --shadow-none: 0 0 #0000;

  /* ---------------------------------------------
     TRANSITIONS
     --------------------------------------------- */
  --transition-none: none;
  --transition-all: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-DEFAULT: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-colors: color, background-color, border-color, text-decoration-color, fill, stroke 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-opacity: opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-shadow: box-shadow 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-transform: transform 150ms cubic-bezier(0.4, 0, 0.2, 1);

  /* Duration */
  --duration-75: 75ms;
  --duration-100: 100ms;
  --duration-150: 150ms;
  --duration-200: 200ms;
  --duration-300: 300ms;
  --duration-500: 500ms;
  --duration-700: 700ms;
  --duration-1000: 1000ms;

  /* ---------------------------------------------
     Z-INDEX SCALE
     --------------------------------------------- */
  --z-0: 0;
  --z-10: 10;
  --z-20: 20;
  --z-30: 30;
  --z-40: 40;
  --z-50: 50;
  --z-dropdown: 1000;
  --z-sticky: 1020;
  --z-fixed: 1030;
  --z-modal-backdrop: 1040;
  --z-modal: 1050;
  --z-popover: 1060;
  --z-tooltip: 1070;

  /* ---------------------------------------------
     LAYOUT
     --------------------------------------------- */
  --sidebar-width: 16rem;        /* 256px */
  --sidebar-collapsed-width: 4rem; /* 64px */
  --header-height: 4rem;         /* 64px */
  --container-max-width: 80rem;  /* 1280px */
  
  /* Layout Spacing */
  --page-padding-mobile: 16px;
  --page-padding-tablet: 24px;
  --page-padding-desktop: 32px;
  --section-gap: 24px;
  --content-max-width: 1280px;
  
  --background: oklch(1 0 0);  --foreground: oklch(0.145 0 0);  --card: oklch(1 0 0);  --card-foreground: oklch(0.145 0 0);  --popover: oklch(1 0 0);  --popover-foreground: oklch(0.145 0 0);  --primary: oklch(0.205 0 0);  --primary-foreground: oklch(0.985 0 0);  --secondary: oklch(0.97 0 0);  --secondary-foreground: oklch(0.205 0 0);  --muted: oklch(0.97 0 0);  --muted-foreground: oklch(0.556 0 0);  --accent: oklch(0.97 0 0);  --accent-foreground: oklch(0.205 0 0);  --destructive: oklch(0.577 0.245 27.325);  --border: oklch(0.922 0 0);  --input: oklch(0.922 0 0);  --ring: oklch(0.708 0 0);  --chart-1: oklch(0.646 0.222 41.116);  --chart-2: oklch(0.6 0.118 184.704);  --chart-3: oklch(0.398 0.07 227.392);  --chart-4: oklch(0.828 0.189 84.429);  --chart-5: oklch(0.769 0.188 70.08);  --sidebar: oklch(0.985 0 0);  --sidebar-foreground: oklch(0.145 0 0);  --sidebar-primary: oklch(0.205 0 0);  --sidebar-primary-foreground: oklch(0.985 0 0);  --sidebar-accent: oklch(0.97 0 0);  --sidebar-accent-foreground: oklch(0.205 0 0);  --sidebar-border: oklch(0.922 0 0);  --sidebar-ring: oklch(0.708 0 0);
}

/* =============================================
   DARK MODE OVERRIDES
   ============================================= */

.dark {
  --color-background: 222.2 84% 4.9%;
  --color-foreground: 210 40% 98%;

  --color-card: 222.2 84% 4.9%;
  --color-card-foreground: 210 40% 98%;

  --color-popover: 222.2 84% 4.9%;
  --color-popover-foreground: 210 40% 98%;

  --color-muted: 217.2 32.6% 17.5%;
  --color-muted-foreground: 215 20.2% 65.1%;

  --color-border: 217.2 32.6% 17.5%;
  --color-input: 217.2 32.6% 17.5%;
  --color-ring: 238 76% 68%;
  
  /* Layout Spacing (same in dark mode) */
  --page-padding-mobile: 16px;
  --page-padding-tablet: 24px;
  --page-padding-desktop: 32px;
  --section-gap: 24px;
  --content-max-width: 1280px;
  
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.922 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.556 0 0);
}

/* =============================================
   TAILWIND THEME EXTENSION
   ============================================= */

@theme inline {
  /* Colors */
  --color-background: hsl(var(--color-background));
  --color-foreground: hsl(var(--color-foreground));

  --color-card: hsl(var(--color-card));
  --color-card-foreground: hsl(var(--color-card-foreground));

  --color-popover: hsl(var(--color-popover));
  --color-popover-foreground: hsl(var(--color-popover-foreground));

  --color-primary: hsl(var(--color-primary));
  --color-primary-foreground: hsl(var(--color-primary-foreground));

  --color-secondary: hsl(var(--color-secondary));
  --color-secondary-foreground: hsl(var(--color-secondary-foreground));

  --color-accent: hsl(var(--color-accent));
  --color-accent-foreground: hsl(var(--color-accent-foreground));

  --color-muted: hsl(var(--color-muted));
  --color-muted-foreground: hsl(var(--color-muted-foreground));

  --color-success: hsl(var(--color-success));
  --color-success-foreground: hsl(var(--color-success-foreground));

  --color-warning: hsl(var(--color-warning));
  --color-warning-foreground: hsl(var(--color-warning-foreground));

  --color-danger: hsl(var(--color-danger));
  --color-danger-foreground: hsl(var(--color-danger-foreground));

  --color-info: hsl(var(--color-info));
  --color-info-foreground: hsl(var(--color-info-foreground));

  --color-border: hsl(var(--color-border));
  --color-input: hsl(var(--color-input));
  --color-ring: hsl(var(--color-ring));

  /* Fonts */
  --font-sans: var(--font-sans);
  --font-mono: var(--font-mono);

  /* Border Radius */
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-destructive: var(--destructive);
  --radius-2xl: calc(var(--radius) + 8px);
  --radius-3xl: calc(var(--radius) + 12px);
  --radius-4xl: calc(var(--radius) + 16px);
}

/* =============================================
   BASE STYLES
   ============================================= */

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  /* Focus styles */
  *:focus-visible {
    @apply outline-none ring-2 ring-ring ring-offset-2 ring-offset-background;
  }

  /* Selection */
  ::selection {
    @apply bg-primary/20 text-foreground;
  }

  /* Scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-muted;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-muted-foreground/30 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-muted-foreground/50;
  }
}

/* =============================================
   TYPOGRAPHY UTILITIES
   ============================================= */

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .text-pretty {
    text-wrap: pretty;
  }

  /* Gradient text */
  .text-gradient {
    @apply bg-linear-to-r from-primary to-secondary bg-clip-text text-transparent;
  }

  /* Truncate multiline */
  .line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

/* =============================================
   ANIMATION UTILITIES
   ============================================= */

@layer utilities {
  /* Fade in */
  .animate-in {
    animation: animate-in 200ms ease-out;
  }

  @keyframes animate-in {
    from {
      opacity: 0;
      transform: translateY(4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Fade out */
  .animate-out {
    animation: animate-out 200ms ease-in;
  }

  @keyframes animate-out {
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(4px);
    }
  }

  /* Slide in from right */
  .slide-in-from-right {
    animation: slide-in-from-right 200ms ease-out;
  }

  @keyframes slide-in-from-right {
    from {
      opacity: 0;
      transform: translateX(100%);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  /* Pulse subtle */
  .animate-pulse-subtle {
    animation: pulse-subtle 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  @keyframes pulse-subtle {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.8;
    }
  }

  /* Spin slow */
  .animate-spin-slow {
    animation: spin 3s linear infinite;
  }
}

/* =============================================
   COMPONENT UTILITIES
   ============================================= */

@layer utilities {
  /* Glass effect */
  .glass {
    @apply bg-background/80 backdrop-blur-md;
  }

  /* Gradient border */
  .border-gradient {
    border: 2px solid transparent;
    background: linear-gradient(var(--color-background), var(--color-background)) padding-box,
                linear-gradient(to right, hsl(var(--color-primary)), hsl(var(--color-secondary))) border-box;
  }

  /* No scrollbar */
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* =============================================
   MOBILE / TOUCH DEVICE UTILITIES
   ============================================= */

/* Safe area for mobile devices with notch (iPhone X+, etc.) */
.safe-area-inset-bottom {
  padding-bottom: env(safe-area-inset-bottom, 0);
}

.safe-area-inset-top {
  padding-top: env(safe-area-inset-top, 0);
}

.safe-area-inset-left {
  padding-left: env(safe-area-inset-left, 0);
}

.safe-area-inset-right {
  padding-right: env(safe-area-inset-right, 0);
}

/* Touch optimization - prevents 300ms delay and removes tap highlight */
.touch-manipulation {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  user-select: none;
}

/* Allow text selection for inputs */
.touch-manipulation-input {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

/* Prevent pull-to-refresh on overscroll */
.overscroll-none {
  overscroll-behavior: none;
}

/* Minimum touch target size (44x44px per Apple HIG) */
.touch-target {
  min-width: 44px;
  min-height: 44px;
}

/* =============================================
   FLUID TYPOGRAPHY
   Scales smoothly between breakpoints
   ============================================= */

:root {
  /* Fluid type scale - automatically scales between mobile and desktop */
  --fluid-xs: clamp(0.75rem, 0.7rem + 0.25vw, 0.875rem);
  --fluid-sm: clamp(0.875rem, 0.8rem + 0.35vw, 1rem);
  --fluid-base: clamp(1rem, 0.9rem + 0.5vw, 1.125rem);
  --fluid-lg: clamp(1.125rem, 1rem + 0.6vw, 1.375rem);
  --fluid-xl: clamp(1.25rem, 1.1rem + 0.75vw, 1.75rem);
  --fluid-2xl: clamp(1.5rem, 1.25rem + 1.25vw, 2.25rem);
  --fluid-3xl: clamp(1.875rem, 1.5rem + 1.875vw, 3rem);
  --fluid-4xl: clamp(2.25rem, 1.75rem + 2.5vw, 3.75rem);
  --fluid-5xl: clamp(3rem, 2rem + 5vw, 5rem);
  --fluid-6xl: clamp(3.75rem, 2.5rem + 6.25vw, 6rem);
  
  /* Fluid spacing */
  --fluid-space-xs: clamp(0.5rem, 0.4rem + 0.5vw, 1rem);
  --fluid-space-sm: clamp(1rem, 0.75rem + 1.25vw, 1.5rem);
  --fluid-space-md: clamp(1.5rem, 1rem + 2.5vw, 2.5rem);
  --fluid-space-lg: clamp(2rem, 1.5rem + 2.5vw, 4rem);
  --fluid-space-xl: clamp(3rem, 2rem + 5vw, 6rem);
  --fluid-space-2xl: clamp(4rem, 2.5rem + 7.5vw, 8rem);
}

@layer utilities {
  /* Fluid typography classes */
  .text-fluid-xs { font-size: var(--fluid-xs); }
  .text-fluid-sm { font-size: var(--fluid-sm); }
  .text-fluid-base { font-size: var(--fluid-base); }
  .text-fluid-lg { font-size: var(--fluid-lg); }
  .text-fluid-xl { font-size: var(--fluid-xl); }
  .text-fluid-2xl { font-size: var(--fluid-2xl); }
  .text-fluid-3xl { font-size: var(--fluid-3xl); }
  .text-fluid-4xl { font-size: var(--fluid-4xl); }
  .text-fluid-5xl { font-size: var(--fluid-5xl); }
  .text-fluid-6xl { font-size: var(--fluid-6xl); }
  
  /* Fluid spacing classes */
  .gap-fluid-xs { gap: var(--fluid-space-xs); }
  .gap-fluid-sm { gap: var(--fluid-space-sm); }
  .gap-fluid-md { gap: var(--fluid-space-md); }
  .gap-fluid-lg { gap: var(--fluid-space-lg); }
  .gap-fluid-xl { gap: var(--fluid-space-xl); }
  
  .p-fluid-xs { padding: var(--fluid-space-xs); }
  .p-fluid-sm { padding: var(--fluid-space-sm); }
  .p-fluid-md { padding: var(--fluid-space-md); }
  .p-fluid-lg { padding: var(--fluid-space-lg); }
  .p-fluid-xl { padding: var(--fluid-space-xl); }
  
  .py-fluid-xs { padding-top: var(--fluid-space-xs); padding-bottom: var(--fluid-space-xs); }
  .py-fluid-sm { padding-top: var(--fluid-space-sm); padding-bottom: var(--fluid-space-sm); }
  .py-fluid-md { padding-top: var(--fluid-space-md); padding-bottom: var(--fluid-space-md); }
  .py-fluid-lg { padding-top: var(--fluid-space-lg); padding-bottom: var(--fluid-space-lg); }
  .py-fluid-xl { padding-top: var(--fluid-space-xl); padding-bottom: var(--fluid-space-xl); }
  
  .px-fluid-xs { padding-left: var(--fluid-space-xs); padding-right: var(--fluid-space-xs); }
  .px-fluid-sm { padding-left: var(--fluid-space-sm); padding-right: var(--fluid-space-sm); }
  .px-fluid-md { padding-left: var(--fluid-space-md); padding-right: var(--fluid-space-md); }
  .px-fluid-lg { padding-left: var(--fluid-space-lg); padding-right: var(--fluid-space-lg); }
  .px-fluid-xl { padding-left: var(--fluid-space-xl); padding-right: var(--fluid-space-xl); }
}

/* =============================================
   CONTAINER QUERIES
   Component-level responsiveness
   ============================================= */

@layer utilities {
  /* Container query contexts */
  .container-query { container-type: inline-size; }
  .container-query-size { container-type: size; }
  
  /* Named containers */
  .container-card { container-type: inline-size; container-name: card; }
  .container-sidebar { container-type: inline-size; container-name: sidebar; }
  .container-main { container-type: inline-size; container-name: main; }
}

/* =============================================
   ENHANCED ANIMATIONS
   GPU-accelerated with reduced motion support
   ============================================= */

:root {
  /* Animation duration tokens */
  --duration-instant: 50ms;
  --duration-fast: 100ms;
  --duration-normal: 150ms;
  --duration-emphasized: 200ms;
  --duration-complex: 300ms;
  --duration-large: 400ms;
  --duration-page: 500ms;
  
  /* Easing tokens */
  --ease-standard: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-decelerate: cubic-bezier(0, 0, 0.2, 1);
  --ease-accelerate: cubic-bezier(0.4, 0, 1, 1);
  --ease-sharp: cubic-bezier(0.4, 0, 0.6, 1);
  --ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
  --ease-elastic: cubic-bezier(0.68, -0.6, 0.32, 1.6);
  --ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@layer utilities {
  /* Entrance animations */
  .animate-fade-in {
    animation: fadeIn var(--duration-normal) var(--ease-standard) forwards;
  }
  .animate-fade-in-up {
    animation: fadeInUp var(--duration-emphasized) var(--ease-decelerate) forwards;
  }
  .animate-fade-in-down {
    animation: fadeInDown var(--duration-emphasized) var(--ease-decelerate) forwards;
  }
  .animate-fade-in-left {
    animation: fadeInLeft var(--duration-emphasized) var(--ease-decelerate) forwards;
  }
  .animate-fade-in-right {
    animation: fadeInRight var(--duration-emphasized) var(--ease-decelerate) forwards;
  }
  .animate-scale-in {
    animation: scaleIn var(--duration-emphasized) var(--ease-spring) forwards;
  }
  .animate-slide-in-up {
    animation: slideInUp var(--duration-complex) var(--ease-decelerate) forwards;
  }
  .animate-slide-in-down {
    animation: slideInDown var(--duration-complex) var(--ease-decelerate) forwards;
  }
  .animate-slide-in-left {
    animation: slideInLeft var(--duration-complex) var(--ease-decelerate) forwards;
  }
  .animate-slide-in-right {
    animation: slideInRight var(--duration-complex) var(--ease-decelerate) forwards;
  }
  .animate-bounce-in {
    animation: bounceIn var(--duration-large) var(--ease-standard) forwards;
  }
  
  /* Looping animations */
  .animate-bounce-slow {
    animation: bounce 1s var(--ease-standard) infinite;
  }
  .animate-pulse-slow {
    animation: pulse 2s var(--ease-standard) infinite;
  }
  .animate-shimmer {
    animation: shimmer 2s linear infinite;
    background: linear-gradient(
      90deg,
      hsl(var(--color-muted)) 0%,
      hsl(var(--color-muted-foreground) / 0.1) 50%,
      hsl(var(--color-muted)) 100%
    );
    background-size: 200% 100%;
  }
  
  /* Feedback animations */
  .animate-shake {
    animation: shake var(--duration-large) var(--ease-standard);
  }
  
  /* Stagger animation delays */
  .stagger-1 { animation-delay: 50ms; }
  .stagger-2 { animation-delay: 100ms; }
  .stagger-3 { animation-delay: 150ms; }
  .stagger-4 { animation-delay: 200ms; }
  .stagger-5 { animation-delay: 250ms; }
  .stagger-6 { animation-delay: 300ms; }
  .stagger-7 { animation-delay: 350ms; }
  .stagger-8 { animation-delay: 400ms; }
}

/* Keyframe definitions */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeInDown {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeInLeft {
  from { opacity: 0; transform: translateX(-10px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes fadeInRight {
  from { opacity: 0; transform: translateX(10px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes slideInUp {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

@keyframes slideInDown {
  from { transform: translateY(-100%); }
  to { transform: translateY(0); }
}

@keyframes slideInLeft {
  from { transform: translateX(-100%); }
  to { transform: translateX(0); }
}

@keyframes slideInRight {
  from { transform: translateX(100%); }
  to { transform: translateX(0); }
}

@keyframes bounceIn {
  0% { opacity: 0; transform: scale(0.3); }
  50% { transform: scale(1.05); }
  70% { transform: scale(0.9); }
  100% { opacity: 1; transform: scale(1); }
}

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
  20%, 40%, 60%, 80% { transform: translateX(4px); }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* =============================================
   ACCESSIBILITY UTILITIES
   WCAG 2.1 AA compliant features
   ============================================= */

@layer utilities {
  /* Screen reader only - visually hidden but accessible */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
  
  /* Remove sr-only when focused */
  .sr-only-focusable:focus,
  .sr-only-focusable:focus-within {
    position: static;
    width: auto;
    height: auto;
    padding: inherit;
    margin: inherit;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }
  
  /* Skip link styling */
  .skip-link {
    position: absolute;
    top: -100%;
    left: 50%;
    transform: translateX(-50%);
    z-index: 9999;
    padding: 0.75rem 1.5rem;
    background: hsl(var(--color-primary-500));
    color: white;
    text-decoration: none;
    font-weight: 600;
    border-radius: 0 0 0.5rem 0.5rem;
    transition: top var(--duration-normal) var(--ease-standard);
  }
  
  .skip-link:focus {
    top: 0;
    outline: 2px solid white;
    outline-offset: 2px;
  }
  
  /* Enhanced focus indicators */
  .focus-ring {
    outline: 2px solid hsl(var(--color-primary-500));
    outline-offset: 2px;
  }
  
  .focus-ring-inset {
    outline: 2px solid hsl(var(--color-primary-500));
    outline-offset: -2px;
  }
  
  /* Touch target minimum size */
  .touch-target-min {
    min-width: 44px;
    min-height: 44px;
  }
  
  .touch-target-comfortable {
    min-width: 48px;
    min-height: 48px;
  }
}

/* =============================================
   REDUCED MOTION SUPPORT
   Respects user preferences
   ============================================= */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  /* Disable parallax effects */
  .parallax {
    transform: none !important;
  }
}

/* =============================================
   HIGH CONTRAST MODE SUPPORT
   ============================================= */

@media (forced-colors: active) {
  *:focus-visible {
    outline: 3px solid CanvasText !important;
    outline-offset: 2px;
  }
  
  /* Ensure visible borders */
  .border,
  [class*="border-"] {
    border-color: CanvasText !important;
  }
}

@media (prefers-contrast: more) {
  :root {
    --color-border: 0 0% 20%;
  }
  
  .dark {
    --color-border: 0 0% 80%;
  }
}

/* =============================================
   THEME TRANSITIONS
   Smooth dark/light mode switching
   ============================================= */

html {
  /* Enable smooth color transitions for theme switching */
  color-scheme: light dark;
}

html.theme-transition,
html.theme-transition *,
html.theme-transition *::before,
html.theme-transition *::after {
  transition: 
    color var(--duration-emphasized) var(--ease-standard),
    background-color var(--duration-emphasized) var(--ease-standard),
    border-color var(--duration-emphasized) var(--ease-standard),
    box-shadow var(--duration-emphasized) var(--ease-standard) !important;
}

/* =============================================
   RESPONSIVE GRID UTILITIES
   ============================================= */

@layer utilities {
  /* Auto-fit responsive grid */
  .grid-auto-fit {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(280px, 100%), 1fr));
    gap: var(--spacing-4);
  }
  
  .grid-auto-fit-sm {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(200px, 100%), 1fr));
    gap: var(--spacing-4);
  }
  
  .grid-auto-fit-lg {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(360px, 100%), 1fr));
    gap: var(--spacing-4);
  }
  
  /* Auto-fill responsive grid */
  .grid-auto-fill {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(min(280px, 100%), 1fr));
    gap: var(--spacing-4);
  }
}

/* =============================================
   VIEWPORT SAFE AREAS
   Mobile browser chrome handling
   ============================================= */

:root {
  /* Dynamic viewport units with fallbacks */
  --vh: 1vh;
  --dvh: 1dvh;
  --svh: 1svh;
  --lvh: 1lvh;
}

@supports (height: 100dvh) {
  :root {
    --vh: 1dvh;
  }
}

@layer utilities {
  /* Full height accounting for mobile browser chrome */
  .h-screen-safe {
    height: 100vh;
    height: 100dvh;
  }
  
  .min-h-screen-safe {
    min-height: 100vh;
    min-height: 100dvh;
  }
  
  .max-h-screen-safe {
    max-height: 100vh;
    max-height: 100dvh;
  }
}

/* =============================================
   PUCK EDITOR DARK MODE OVERRIDES
   Ensures Puck editor respects dark mode theme
   ============================================= */

/* Puck Editor Root */
.dark [class*="Puck"] {
  color-scheme: dark;
}

/* Puck Sidebar/Panel Background */
.dark .Puck,
.dark [class*="Puck-"] {
  --puck-color-white: hsl(var(--background));
  --puck-color-grey-01: hsl(var(--background));
  --puck-color-grey-02: hsl(var(--muted));
  --puck-color-grey-03: hsl(var(--border));
  --puck-color-grey-04: hsl(var(--muted-foreground));
  --puck-color-grey-05: hsl(var(--foreground));
  --puck-color-black: hsl(var(--foreground));
  --puck-color-azure-01: hsl(var(--primary) / 0.1);
  --puck-color-azure-02: hsl(var(--primary) / 0.2);
  --puck-color-azure-03: hsl(var(--primary) / 0.4);
  --puck-color-azure-04: hsl(var(--primary) / 0.6);
  --puck-color-azure-05: hsl(var(--primary));
  --puck-color-azure-06: hsl(var(--primary));
  --puck-color-azure-07: hsl(var(--primary) / 0.8);
  --puck-color-azure-08: hsl(var(--primary) / 0.6);
  --puck-color-azure-09: hsl(var(--primary) / 0.4);
}

/* Puck Left Panel (Component List) */
.dark [class*="Puck-leftSideBar"],
.dark [class*="leftSideBar"],
.dark [class*="ComponentList"] {
  background-color: hsl(var(--card)) !important;
  border-color: hsl(var(--border)) !important;
}

/* Puck Right Panel (Fields Panel) */
.dark [class*="Puck-rightSideBar"],
.dark [class*="rightSideBar"],
.dark [class*="Puck-fields"] {
  background-color: hsl(var(--card)) !important;
  border-color: hsl(var(--border)) !important;
}

/* Puck Header */
.dark [class*="Puck-header"],
.dark [class*="PuckHeader"] {
  background-color: hsl(var(--card)) !important;
  border-color: hsl(var(--border)) !important;
  color: hsl(var(--foreground)) !important;
}

/* Puck Field Inputs */
.dark [class*="Puck"] input,
.dark [class*="Puck"] textarea,
.dark [class*="Puck"] select {
  background-color: hsl(var(--background)) !important;
  border-color: hsl(var(--border)) !important;
  color: hsl(var(--foreground)) !important;
}

.dark [class*="Puck"] input:focus,
.dark [class*="Puck"] textarea:focus,
.dark [class*="Puck"] select:focus {
  border-color: hsl(var(--primary)) !important;
  outline-color: hsl(var(--primary)) !important;
}

/* Puck Field Labels */
.dark [class*="Puck"] label,
.dark [class*="FieldLabel"] {
  color: hsl(var(--foreground)) !important;
}

/* Puck Buttons */
.dark [class*="Puck"] button {
  color: hsl(var(--foreground));
}

.dark [class*="Puck"] button:hover {
  background-color: hsl(var(--accent)) !important;
}

/* Puck Component Item */
.dark [class*="ComponentListItem"],
.dark [class*="Puck-componentItem"] {
  background-color: hsl(var(--card)) !important;
  border-color: hsl(var(--border)) !important;
  color: hsl(var(--foreground)) !important;
}

.dark [class*="ComponentListItem"]:hover,
.dark [class*="Puck-componentItem"]:hover {
  background-color: hsl(var(--accent)) !important;
}

/* Puck Canvas Frame */
.dark [class*="Puck-frame"],
.dark [class*="PuckFrame"],
.dark [class*="Puck-canvas"] {
  background-color: hsl(var(--muted) / 0.5) !important;
}

/* Puck Draggable Items */
.dark [class*="Draggable"] {
  background-color: hsl(var(--card)) !important;
}

/* Puck Dropdown Menus */
.dark [class*="Puck"] [role="menu"],
.dark [class*="Puck"] [role="listbox"] {
  background-color: hsl(var(--popover)) !important;
  border-color: hsl(var(--border)) !important;
}

.dark [class*="Puck"] [role="menuitem"],
.dark [class*="Puck"] [role="option"] {
  color: hsl(var(--popover-foreground)) !important;
}

.dark [class*="Puck"] [role="menuitem"]:hover,
.dark [class*="Puck"] [role="option"]:hover {
  background-color: hsl(var(--accent)) !important;
}

/* Puck Section Headers */
.dark [class*="SectionHeader"],
.dark [class*="Puck-sectionTitle"] {
  color: hsl(var(--foreground)) !important;
  border-color: hsl(var(--border)) !important;
}

/* Puck Array Field Items */
.dark [class*="ArrayField"],
.dark [class*="ArrayFieldItem"] {
  background-color: hsl(var(--card)) !important;
  border-color: hsl(var(--border)) !important;
}

/* Puck Toggle/Radio Fields */
.dark [class*="Puck"] [role="radio"],
.dark [class*="Puck"] [role="checkbox"] {
  border-color: hsl(var(--border)) !important;
}

.dark [class*="Puck"] [role="radio"][aria-checked="true"],
.dark [class*="Puck"] [role="checkbox"][aria-checked="true"] {
  background-color: hsl(var(--primary)) !important;
  border-color: hsl(var(--primary)) !important;
}

/* Puck Scrollbars */
.dark [class*="Puck"]::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.dark [class*="Puck"]::-webkit-scrollbar-track {
  background: hsl(var(--muted));
}

.dark [class*="Puck"]::-webkit-scrollbar-thumb {
  background: hsl(var(--muted-foreground) / 0.3);
  border-radius: 4px;
}

.dark [class*="Puck"]::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--muted-foreground) / 0.5);
}

/* Puck Preview Canvas Content */
.dark .Puck iframe {
  background-color: hsl(var(--background));
}

/* Puck Empty State */
.dark [class*="Puck-emptyState"],
.dark [class*="EmptyState"] {
  color: hsl(var(--muted-foreground)) !important;
}

/* Puck Category Accordion */
.dark [class*="CategoryAccordion"],
.dark [class*="Puck-category"] {
  border-color: hsl(var(--border)) !important;
}

.dark [class*="CategoryAccordion"] button,
.dark [class*="Puck-categoryHeader"] {
  color: hsl(var(--foreground)) !important;
}

/* Puck Icons in Dark Mode */
.dark [class*="Puck"] svg {
  color: currentColor;
}

/* =============================================
   PUCK EDITOR UI POLISH (PHASE-ED-08)
   Enhanced visual polish and animations
   ============================================= */

/* Editor Canvas Polish */
[class*="Puck-canvas"],
[class*="Puck-frame"] {
  transition: background-color 0.2s ease;
}

/* Smooth zoom transitions */
[class*="Puck-frameInner"] {
  transition: transform 0.15s ease-out;
}

/* Component hover states */
[class*="Puck-componentList"] [class*="item"]:hover,
[class*="ComponentListItem"]:hover {
  transform: translateX(2px);
  transition: transform 0.15s ease;
}

/* Selected component highlight */
[class*="Puck-selected"],
[class*="Puck-componentSelected"] {
  outline: 2px solid hsl(var(--primary));
  outline-offset: 2px;
  border-radius: 4px;
}

/* Drag preview polish */
[class*="Puck-dragging"],
[class*="Draggable--dragging"] {
  opacity: 0.9;
  box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.3);
  transform: scale(1.02);
}

/* Drop zone indicator */
[class*="Puck-dropZone"],
[class*="DropZone--active"] {
  background: hsl(var(--primary) / 0.1);
  border: 2px dashed hsl(var(--primary));
  border-radius: 8px;
  transition: all 0.15s ease;
}

/* Field group animation */
[class*="Puck-fieldGroup"],
[class*="FieldGroup"] {
  transition: opacity 0.2s ease;
}

/* Sidebar resize handle */
[class*="Puck-resizeHandle"] {
  transition: background-color 0.15s ease;
}

[class*="Puck-resizeHandle"]:hover {
  background-color: hsl(var(--primary) / 0.3);
}

/* Panel header polish */
[class*="Puck-panelHeader"],
[class*="PanelHeader"] {
  font-weight: 600;
  letter-spacing: -0.01em;
}

/* Button hover animations */
[class*="Puck"] button {
  transition: background-color 0.15s ease, transform 0.1s ease, box-shadow 0.15s ease;
}

[class*="Puck"] button:active:not(:disabled) {
  transform: scale(0.98);
}

/* Input focus states */
[class*="Puck"] input:focus,
[class*="Puck"] textarea:focus,
[class*="Puck"] select:focus {
  outline: none;
  ring: 2px solid hsl(var(--primary) / 0.3);
  box-shadow: 0 0 0 3px hsl(var(--primary) / 0.1);
  transition: box-shadow 0.15s ease;
}

/* Loading shimmer effect */
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.puck-skeleton {
  background: linear-gradient(
    90deg,
    hsl(var(--muted)) 25%,
    hsl(var(--muted-foreground) / 0.1) 50%,
    hsl(var(--muted)) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

/* Toolbar polish */
.puck-toolbar {
  backdrop-filter: blur(8px);
  background: hsl(var(--card) / 0.95);
}

/* Empty state animation */
@keyframes float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-8px);
  }
}

.puck-empty-state-icon {
  animation: float 3s ease-in-out infinite;
}

/* Keyboard shortcut key styling */
.puck-key {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 1.5rem;
  height: 1.5rem;
  padding: 0 0.375rem;
  font-size: 0.75rem;
  font-family: var(--font-mono, ui-monospace, monospace);
  font-weight: 500;
  background: hsl(var(--muted));
  border: 1px solid hsl(var(--border));
  border-radius: 4px;
  box-shadow: 0 1px 2px hsl(var(--foreground) / 0.05);
}

/* Tooltip fade in */
[class*="Puck-tooltip"],
[class*="Tooltip"] {
  animation: tooltipFadeIn 0.15s ease;
}

@keyframes tooltipFadeIn {
  from {
    opacity: 0;
    transform: translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* AI panel gradient border */
.puck-ai-panel {
  position: relative;
}

.puck-ai-panel::before {
  content: "";
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  padding: 1px;
  background: linear-gradient(135deg, hsl(var(--primary)), hsl(271 80% 60%));
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
}

/* Template card hover effect */
.puck-template-card {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.puck-template-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 40px -12px hsl(var(--foreground) / 0.15);
}

/* Responsive editor layout */
@media (max-width: 1024px) {
  [class*="Puck-leftSideBar"],
  [class*="leftSideBar"] {
    width: 200px !important;
  }
  
  [class*="Puck-rightSideBar"],
  [class*="rightSideBar"] {
    width: 240px !important;
  }
}

@media (max-width: 768px) {
  [class*="Puck-leftSideBar"],
  [class*="leftSideBar"],
  [class*="Puck-rightSideBar"],
  [class*="rightSideBar"] {
    position: absolute !important;
    z-index: 50;
    height: 100%;
    box-shadow: 0 0 40px hsl(var(--foreground) / 0.1);
  }
}

/* Print styles - hide editor chrome */
@media print {
  [class*="Puck-leftSideBar"],
  [class*="Puck-rightSideBar"],
  [class*="Puck-header"],
  .puck-toolbar {
    display: none !important;
  }
  
  [class*="Puck-canvas"],
  [class*="Puck-frame"] {
    position: static !important;
    width: 100% !important;
    height: auto !important;
  }
}
